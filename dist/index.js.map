{"version":3,"sources":["../src/assets/useAssets.ts","../src/assets/useAssetBundle.ts","../src/assets/useAssetManifest.ts"],"sourcesContent":["import {useEffect, useState} from 'react';\nimport {Assets} from 'pixi.js';\nimport {createKey, didKeyChange, isLoaded, resolve} from './utils';\n\nimport type {UnresolvedAsset} from 'pixi.js';\nimport type {AssetState, HookState} from './types';\nimport {useAssetState} from './hooks/useAssetState';\n\nexport function useAssets<T>(urls: string | UnresolvedAsset): AssetState<T | undefined>;\nexport function useAssets<T>(urls: string[] | UnresolvedAsset[]): AssetState<Record<string, T>>;\n\nexport function useAssets<T>(urls: string | UnresolvedAsset | string[] | UnresolvedAsset[]) {\n  const {state, setState, thenable} = useAssetState<T>(urls, isLoaded, Assets.load, resolve);\n\n  useEffect(() => {\n    thenable\n      ?.then(data => setState({isLoaded: true, error: null, data}))\n      .catch(error => setState({isLoaded: true, error, data: undefined}));\n  }, [thenable]);\n\n  return state;\n}\n","import {useEffect} from 'react';\nimport {Assets} from 'pixi.js';\nimport {useAssetState} from './hooks/useAssetState';\nimport {isBundleLoaded, resolveBundle} from './utils';\n\nimport type {ResolvedAsset} from 'pixi.js';\nimport type {AssetState} from './types';\n\nexport function useAssetBundle(bundles: string): AssetState<Record<string, ResolvedAsset>>;\nexport function useAssetBundle(\n  bundles: string[],\n): AssetState<Record<string, Record<string, ResolvedAsset>>>;\n\nexport function useAssetBundle(bundles: string | string[]) {\n  const {state, setState, thenable} = useAssetState<\n    Record<string, ResolvedAsset> | Record<string, Record<string, ResolvedAsset>>\n  >(bundles, isBundleLoaded, Assets.loadBundle, resolveBundle);\n\n  useEffect(() => {\n    thenable\n      ?.then(data => setState({isLoaded: true, error: null, data}))\n      .catch(error => setState({isLoaded: true, error, data: undefined}));\n  }, [thenable]);\n\n  return state;\n}\n","/* eslint-disable react-compiler/react-compiler */\n\nimport {Assets, AssetsManifest} from 'pixi.js';\nimport {useEffect, useState} from 'react';\n\nlet manifestSingleton: AssetsManifest | null = null;\n\nexport function useAssetManifest(\n  manifest: AssetsManifest,\n  bundles: string[] = [],\n  options: Omit<Parameters<typeof Assets.init>[0], 'manifest'> = {},\n) {\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      await Assets.init({\n        ...options,\n        manifest,\n      });\n\n      Assets.backgroundLoadBundle(\n        bundles.length > 0 ? bundles : manifest.bundles.map(bundle => bundle.name),\n      );\n      setIsLoaded(true);\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- only run once\n  }, []);\n\n  if (manifestSingleton !== null && manifestSingleton !== manifest) {\n    console.warn('useAssetManifest should only be used once in your app');\n  }\n  manifestSingleton = manifest;\n\n  return {isLoaded};\n}\n"],"mappings":";;;;;;;;;AAAA,SAAQ,iBAA0B;AAClC,SAAQ,cAAa;AAUd,SAAS,UAAa,MAA+D;AAC1F,QAAM,EAAC,OAAO,UAAU,SAAQ,IAAI,cAAiB,MAAM,UAAU,OAAO,MAAM,OAAO;AAEzF,YAAU,MAAM;AACd,yCACI,KAAK,UAAQ,SAAS,EAAC,UAAU,MAAM,OAAO,MAAM,KAAI,CAAC,GAC1D,MAAM,WAAS,SAAS,EAAC,UAAU,MAAM,OAAO,MAAM,OAAS,CAAC;AAAA,EACrE,GAAG,CAAC,QAAQ,CAAC;AAEb,SAAO;AACT;;;ACrBA,SAAQ,aAAAA,kBAAgB;AACxB,SAAQ,UAAAC,eAAa;AAYd,SAAS,eAAe,SAA4B;AACzD,QAAM,EAAC,OAAO,UAAU,SAAQ,IAAI,cAElC,SAAS,gBAAgBC,QAAO,YAAY,aAAa;AAE3D,EAAAC,WAAU,MAAM;AACd,yCACI,KAAK,UAAQ,SAAS,EAAC,UAAU,MAAM,OAAO,MAAM,KAAI,CAAC,GAC1D,MAAM,WAAS,SAAS,EAAC,UAAU,MAAM,OAAO,MAAM,OAAS,CAAC;AAAA,EACrE,GAAG,CAAC,QAAQ,CAAC;AAEb,SAAO;AACT;;;ACvBA,SAAQ,UAAAC,eAA6B;AACrC,SAAQ,aAAAC,YAAW,YAAAC,iBAAe;AAElC,IAAI,oBAA2C;AAExC,SAAS,iBACd,UACA,UAAoB,CAAC,GACrB,UAA+D,CAAC,GAChE;AACA,QAAM,CAACC,WAAU,WAAW,IAAID,UAAS,KAAK;AAE9C,EAAAD,WAAU,MAAM;AACd,KAAC,YAAY;AACX,YAAMD,QAAO,KAAK;AAAA,QAChB,GAAG;AAAA,QACH;AAAA,MACF,CAAC;AAED,MAAAA,QAAO;AAAA,QACL,QAAQ,SAAS,IAAI,UAAU,SAAS,QAAQ,IAAI,YAAU,OAAO,IAAI;AAAA,MAC3E;AACA,kBAAY,IAAI;AAAA,IAClB,GAAG;AAAA,EAEL,GAAG,CAAC,CAAC;AAEL,MAAI,sBAAsB,QAAQ,sBAAsB,UAAU;AAChE,YAAQ,KAAK,uDAAuD;AAAA,EACtE;AACA,sBAAoB;AAEpB,SAAO,EAAC,UAAAG,UAAQ;AAClB;","names":["useEffect","Assets","Assets","useEffect","Assets","useEffect","useState","isLoaded"]}